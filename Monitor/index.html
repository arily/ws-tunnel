<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<title>Sticky Table Headers Revisited | Demo 3</title>
		<meta name="description" content="Sticky Table Headers Revisited: Creating functional and flexible sticky table headers" />
		<meta name="keywords" content="Sticky Table Headers Revisited" />
		<meta name="author" content="Codrops" />
		<link rel="shortcut icon" href="../favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<!--[if IE]>
  		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="container">
			<!-- Top Navigation -->
			
			<div class="component">
				<table class="">
						<thead>
							<tr>
								<th>Entrance</th>
								<th>Source</th>
								<th>Status</th>
								<th>Local</th>
								<th>Destination</th>
								<th>Src traffic</th>
								<th>Dst traffic</th>
							</tr>
						</thead>
					<tbody id='monitor'>
						
					</tbody>
				</table>
		      </div>
        </div>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
		<script src="js/jquery.stickyheader.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/1.2.0/json2html.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.json2html/1.2.0/jquery.json2html.min.js"></script>
<script>
    window.onload = setInterval(function(){
        $.getJSON('http://localhost:5001/monitor',(e)=>{
            var result = Object.keys(e).map(function(key) {
                return e[key];
            });
//            console.log(result);
            var t = {'<>':'tr','html':[
                {'<>':'td', 'html':'${clientID}@${serverName}'},
                {'<>':'td', 'html':'${srcID}'},
                {'<>':'td','html':'src:${srcConnection} dst:${dstConnection}'},
                {'<>':'td','html':'${localAddress}:${localPort}'},
                {'<>':'td','html':'${dstProtocol}://${dstAddr}:${dstPort}'},
                {'<>':'td','html':'${srcSentBytes}'},
                {'<>':'td','html':'${dstSentBytes}'}
            ]};
            document.getElementById('monitor').innerHTML = (json2html.transform(result,t));
        });
    },1000);
</script>
	</body>
</html>